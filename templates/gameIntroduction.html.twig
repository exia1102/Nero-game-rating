{%extends "base.html.twig"%}

{%block css1%}
<style type="text/css">
	
.card.card-cascade.wider.reverse .card-body.card-body-cascade {
    z-index: 3;
    margin-top: -1rem;
    -webkit-border-radius: .25rem;
    border-radius: .25rem;
    -webkit-box-shadow: 0 5px 11px 0 rgba(0,0,0,.18), 0 4px 15px 0 rgba(0,0,0,.15);
    box-shadow: 0 5px 11px 0 rgba(0,0,0,.18), 0 4px 15px 0 rgba(0,0,0,.15);
}

.card.card-cascade.wider .card-body.card-body-cascade {
    -webkit-box-shadow: 0 2px 5px 0 rgba(0,0,0,.16), 0 2px 10px 0 rgba(0,0,0,.12);
    box-shadow: 0 2px 5px 0 rgba(0,0,0,.16), 0 2px 10px 0 rgba(0,0,0,.12);
    margin-left: 4%;
    margin-right: 4%;
    background: #fff;
    z-index: 1;
    -webkit-border-radius: 0 0 .25rem .25rem;
    border-radius: 0 0 .25rem .25rem;
}
.card{
	-webkit-box-shadow: none ; 
    box-shadow: none ; 

}
@media screen and (max-width: 620px){

iframe{
	height: 20rem;
}
.btn-outline-mdb-color{
	padding:30px 20px;

}

}



</style>





{%endblock%}







{%block content%}


<!-- Section: Blog v.4 -->
<main>

        <div class="container">

            <!--Section: Blog v.4-->
            <section class="section section-blog-fw mt-3 pb-2 animated fadeIn">

                <!--Grid row-->
                <div class="row">
                    <div class="col-md-12">
                        <!--Featured image-->
                        <div class="card card-cascade wider reverse">
                            <div class="view view-cascade overlay">
                                <img class="m-0 w-100" src="{{game.g_img}}">
                                <a>
                                </a>
                            </div>

                            <!--Post data-->
                            <div class="card-body card-body-cascade text-center" >
                                <h2><a><strong>{{game.g_name}}</strong></a></h2>
                                <p>Produced by <a>{{game.producer}}</a></p>

                                <!--Social shares-->
                                <div class="social-counters ">



                                    <!--Dribbble-->
                                    <a class="btn btn-dribbble ">
                                        <i class="fa fa-star left "></i>
                                        <span class="hidden-md-down ">Score</span>
                                    </a>
                                    <span class="counter game-score">{{game.g_totalscore/game.num_user}}</span>

                                    <!--Comments-->
                                    <a class="btn btn-blue-grey ">
                                        <i class="fa fa-comments-o left "></i>
                                        <span class="hidden-md-down ">Comments</span>
                                    </a>
                                    <span class="counter ">18</span>

                                </div>
                                <!--Social shares-->

                            </div>
                            <!--Post data-->
                        </div>

                        <!--Excerpt-->
                        <div class="excerpt mt-5 animated fadeIn" style="animation-delay: 0.3s " data-wow-delay="0.3s">
                            

                            <p>{{game.g_description}}</p>


                            <div class="mt-4 d-flex justify-content-end">
                            	{%for category in category%}
                                <a href="./category?{{category.c_id}}" type="button" class="btn btn-outline-{{category.c_color}} waves-effect">{{category.c_name}}</a>
                                {%endfor%}
                            </div>

                        </div>
                    </div>
                </div>
                <!--Grid row-->

            </section>
            <!--Section: Blog v.4-->

            <hr class="mb-5 mt-4">

            <!--Section: Blog v.2-->
            

            <!--Author box-->
            <section>

                <div class="jumbotron p-5 text-center text-md-left author-box wow fadeIn" data-wow-delay="0.3s">
                    <!--Name-->
                    <h4 class="h3-responsive text-center font-weight-bold dark-grey-text">Game video</h4>
                    <hr>
                    <div class="row h-100">
                        <!--Avatar-->
                        <iframe width="1000" height="600" src="{{game.g_video}}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                    </div>
                </div>

            </section>

            <section>

                <div class="jumbotron p-5 text-center text-md-left author-box wow fadeIn" data-wow-delay="0.3s">
                    <!--Name-->
                    <h4 class="h3-responsive text-center font-weight-bold dark-grey-text">Click number to rate this game</h4>
                    <hr>
                    <div class="row w-100">
                        <!--Avatar-->
                        <div class="btn-group text-center mx-auto" role="group" aria-label="First group">
					        <button type="button" class="btn btn-outline-mdb-color waves-effect"data-score=20 data-gid={{game.g_id}}>20</button>
						    <button type="button" class="btn btn-outline-mdb-color waves-effect"data-score=40 data-gid={{game.g_id}}>40</button>
						    <button type="button" class="btn btn-outline-mdb-color waves-effect"data-score=60 data-gid={{game.g_id}}>60</button>
						    <button type="button" class="btn btn-outline-mdb-color waves-effect"data-score=80 data-gid={{game.g_id}}>80</button>
						    <button type="button" class="btn btn-outline-mdb-color waves-effect"data-score=100 data-gid={{game.g_id}}>100</button>
					    </div>
                    </div>
                    <div class="row">
                    	<div class="alert alert-success mb-0 mx-auto mt-2 rating-thankyou" role="alert" style="display: none;">
						  Thank you for rating this game!
						</div>
                </div>

            </section>
            <!--/.Author box-->

            <!--Section: Comments list-->
            <section class="mb-4 pt-5 wow fadeIn"  data-wow-delay="0.3s">
            	<div id="comment-section">
            		<div class="comments-list text-center text-md-left mb-5">
                    <div class="text-center mb-4">
                        <h3 class="font-weight-bold pt-3 mb-5">Comments </h3>
                    </div>
                    {%for comment in comments%}
                    <div class="row mb-4">
                        <!--Image column-->

                        <div class="col-sm-1 col-12 mb-md-0 mb-3">
                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT_S9DUg_S9CHf-DxgcNbxYzZmibzud95wxTQslnreREOxA1ch1" class="img-fluid avatar rounded-circle z-depth-2">
                        </div>
                        <!--/.Image column-->

                        <!--Content column-->
                        <div class="col-sm-11 col-12">
                            
                            <p class="black-text">{{comment.comment}}</p>

                                <hr>
                        </div>
                        <!--/.Content column-->

                    </div>
                  	{%endfor%}
                    
                </div>


            	</div>
                <!--Main wrapper-->
                
                <!--/.Main wrapper-->

            </section>
            <!--/Section: Comments list-->


            <!--Section: Leave a reply (Logged In User)-->
            <section class="pb-5 mt-5 wow fadeIn" data-wow-delay="0.3s">

                <!--Leave a reply form-->
                <div class="reply-form">
                    <h3 class="text-center my-5 h3 pt-3">Leave a reply </h3>
<!--                     <p class="text-center">(Logged In User)</p> -->

                    <!--Third row-->
                    <div class="row text-center text-md-left">
                        <!--Image column-->
                        <div class="col-sm-2 col-12 mb-md-0 mt-4">
                            <img src="https://mdbootstrap.com/img/Photos/Avatars/img (32).jpg" alt="Sample avatar image" class="img-fluid avatar rounded-circle z-depth-2">
                        </div>
                        <!--/.Image column-->

                        <!--Content column-->
                        <div class="col-sm-10 col-12">
                            <div class="md-form">
                                <textarea type="text" id="form-mess" class="md-textarea form-control" rows="3"></textarea>
                                <label for="form-mess">Your message</label>
                            </div>

                        </div>

                        <div class="col-md-12 text-center mt-4">
                            <button class="btn btn-pink btn-rounded comment-submit" data-gid={{game.g_id}}>Submit</button>
                        </div>
                        <!--/.Content column-->

                    </div>
                    <div class="row">
                    	<div class="alert alert-success mb-0 mx-auto mt-2 comment-thankyou" role="alert" style="display: none;">
						  Thank you for Leaving comment!
						</div>
                </div>
                    <!--/.Third row-->
                </div>
                <!--/.Leave a reply form-->

            </section>
            <!--/Section: Leave a reply (Logged In User)-->

        </div>

    </main>
    <!--Main Layout-->



    
{%endblock%}

{%block script%}



<script type="text/javascript">
	$(".btn-outline-mdb-color").click(function(){

		var gid=$(this).data('gid');
		var score=$(this).data('score');
		var url="./score.php?gid="+gid+"&score="+score;
		$.get(url,function(data){
			$(".game-score").text(data);
		})
		$(".btn-outline-mdb-color").attr("disabled",true);
		$(".rating-thankyou").css("display",'block')
	});
	


	$(".comment-submit").click(function(){
		var gid=$(this).data('gid');
		var comment=$("#form-mess").val();
		if(comment==""){
			return false;
		}
		var url="./comment.php?gid="+gid+"&comment="+comment;
		$.get(url,function(data){
			let str = `<div class="comments-list text-center text-md-left mb-5">
                    <div class="text-center mb-4">
                        <h3 class="font-weight-bold pt-3 mb-5">Comments </h3>
                    </div>`;
        		$.each(JSON.parse(data),function(i,value){
          		console.log(value);
          			let item = `<div class="row mb-4">
 
                        <div class="col-sm-1 col-12 mb-md-0 mb-3">
                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT_S9DUg_S9CHf-DxgcNbxYzZmibzud95wxTQslnreREOxA1ch1" class="img-fluid avatar rounded-circle z-depth-2">
                        </div>
                        <div class="col-sm-11 col-12">
                            
                            <p class="black-text">`+value.comment+`<hr>
                        </div></div>`;
          str = str +item;
        });
        str=str+"</div>";
        $("#comment-section").html(
          str
          );
      })
		var comment=$("#form-mess").val("");
		$(".comment-thankyou").css("display",'block');
  });



</script>



{%endblock%}

